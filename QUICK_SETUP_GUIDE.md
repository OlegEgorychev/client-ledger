# –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Google Drive API –¥–ª—è APK

## –ß—Ç–æ —è –º–æ–≥—É —Å–¥–µ–ª–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ ‚úÖ

1. ‚úÖ **–ü–æ–ª—É—á–∏—Ç—å SHA-1 –æ—Ç–ø–µ—á–∞—Ç–æ–∫** ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç `get-sha1.ps1` (Windows) –∏–ª–∏ `get-sha1.sh` (Linux/Mac)
2. ‚úÖ **–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ** ‚Äî —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞—Å—Ç —Ñ–∞–π–ª `sha1-info.txt` —Å –Ω—É–∂–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

## –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤—Ä—É—á–Ω—É—é ‚ö†Ô∏è

–í–∞–º –Ω—É–∂–Ω–æ –≤–æ–π—Ç–∏ –≤ Google Cloud Console –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å OAuth Client ID (—ç—Ç–æ –∑–∞–Ω–∏–º–∞–µ—Ç 5-10 –º–∏–Ω—É—Ç).

---

## –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —É–ø—Ä–æ—â–µ–Ω–Ω–∞—è)

### –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç–µ SHA-1 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**Windows:**
```powershell
.\get-sha1.ps1
```

**Linux/Mac:**
```bash
chmod +x get-sha1.sh
./get-sha1.sh
```

–°–∫—Ä–∏–ø—Ç –≤—ã–≤–µ–¥–µ—Ç SHA-1 –∏ —Å–æ–∑–¥–∞—Å—Ç —Ñ–∞–π–ª `sha1-info.txt` —Å –¥–∞–Ω–Ω—ã–º–∏.

**–ò–ª–∏ –≤—Ä—É—á–Ω—É—é (Windows PowerShell):**
```powershell
keytool -list -v -keystore "$env:USERPROFILE\.android\debug.keystore" -alias androiddebugkey -storepass android -keypass android | Select-String "SHA1"
```

### –®–∞–≥ 2: –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ Google Cloud Console

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://console.cloud.google.com/
2. –í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π Google –∞–∫–∫–∞—É–Ω—Ç
3. –ù–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç"** (Create Project)
4. –ù–∞–∑–≤–∞–Ω–∏–µ: `Client Ledger Backup` (–∏–ª–∏ –ª—é–±–æ–µ –¥—Ä—É–≥–æ–µ)
5. –ù–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å"**

### –®–∞–≥ 3: –í–∫–ª—é—á–∏—Ç–µ Google Drive API

1. –í –±–æ–∫–æ–≤–æ–º –º–µ–Ω—é: **"APIs & Services" ‚Üí "Library"**
2. –ù–∞–π–¥–∏—Ç–µ **"Google Drive API"**
3. –ù–∞–∂–º–∏—Ç–µ **"Enable"** (–í–∫–ª—é—á–∏—Ç—å)

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ OAuth Consent Screen

1. –í –±–æ–∫–æ–≤–æ–º –º–µ–Ω—é: **"APIs & Services" ‚Üí "OAuth consent screen"**
2. –í—ã–±–µ—Ä–∏—Ç–µ **"External"** ‚Üí **"Create"**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - **App name**: `Client Ledger`
   - **User support email**: –≤–∞—à email
   - **Developer contact email**: –≤–∞—à email
4. –ù–∞–∂–º–∏—Ç–µ **"Save and Continue"** –Ω–∞ –≤—Å–µ—Ö —à–∞–≥–∞—Ö (–ø—Ä–æ–ø—É—Å—Ç–∏—Ç–µ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)

### –®–∞–≥ 5: –°–æ–∑–¥–∞–π—Ç–µ OAuth Client ID

1. –í –±–æ–∫–æ–≤–æ–º –º–µ–Ω—é: **"APIs & Services" ‚Üí "Credentials"**
2. –ù–∞–∂–º–∏—Ç–µ **"+ CREATE CREDENTIALS" ‚Üí "OAuth client ID"**
3. –í—ã–±–µ—Ä–∏—Ç–µ **"Android"**
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - **Name**: `Client Ledger Android`
   - **Package name**: `com.clientledger.app` ‚Üê **—Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ—á–Ω–æ —Ç–∞–∫!**
   - **SHA-1 certificate fingerprint**: –≤—Å—Ç–∞–≤—å—Ç–µ SHA-1 –∏–∑ `sha1-info.txt` (–±–µ–∑ –¥–≤–æ–µ—Ç–æ—á–∏–π –∏–ª–∏ —Å –¥–≤–æ–µ—Ç–æ—á–∏—è–º–∏ ‚Äî –æ–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Ä–∞–±–æ—Ç–∞—é—Ç)
5. –ù–∞–∂–º–∏—Ç–µ **"Create"**
6. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ Client ID** (—Å—Ç—Ä–æ–∫–∞ –≤–∏–¥–∞ `XXXXX.apps.googleusercontent.com`)

**–í–∞–∂–Ω–æ**: Client ID —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ ‚Äî –æ–Ω –≤–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –≤ –±—É–¥—É—â–µ–º, –Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ–Ω –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è (Google Play Services –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –µ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏).

### –®–∞–≥ 6: –ì–æ—Ç–æ–≤–æ! üéâ

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ APK –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
2. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Üí **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Üí **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ**
3. –ù–∞–∂–º–∏—Ç–µ **"–í–æ–π—Ç–∏ –≤ Google Drive"**
4. –í—ã–±–µ—Ä–∏—Ç–µ —Å–≤–æ–π Google –∞–∫–∫–∞—É–Ω—Ç –∏ —Ä–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø
5. –¢–µ–ø–µ—Ä—å –≤—Å–µ –±—ç–∫–∞–ø—ã –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –≤ Google Drive!

---

## –î–∞–Ω–Ω—ã–µ –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ (–¥–ª—è –±—ã—Å—Ç—Ä–æ–π –≤—Å—Ç–∞–≤–∫–∏)

```
Package name: com.clientledger.app
```

SHA-1 –ø–æ–ª—É—á–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç `get-sha1.ps1` –∏–ª–∏ `get-sha1.sh`.

---

## –í–∞–∂–Ω–æ –¥–ª—è Release APK

–ï—Å–ª–∏ –≤—ã –±—É–¥–µ—Ç–µ —Å–æ–±–∏—Ä–∞—Ç—å **Release APK** (–¥–ª—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è):

1. **–ü–æ–ª—É—á–∏—Ç–µ SHA-1 –æ—Ç –≤–∞—à–µ–≥–æ release keystore:**
   ```powershell
   keytool -list -v -keystore –ø—É—Ç—å/–∫/–≤–∞—à–µ–º—É/release.keystore -alias –≤–∞—à_alias
   ```

2. **–°–æ–∑–¥–∞–π—Ç–µ –≤—Ç–æ—Ä–æ–π OAuth Client ID** –≤ Google Cloud Console:
   - –¢–æ—Ç –∂–µ package name: `com.clientledger.app`
   - –ù–æ —Å SHA-1 –æ—Ç release keystore
   - –ù–∞–∑–æ–≤–∏—Ç–µ –µ–≥–æ: `Client Ledger Android Release`

3. Google Play Services –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–µ—Ä–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Client ID –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–æ–¥–ø–∏—Å–∏ APK.

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
1. –î–æ–±–∞–≤—å—Ç–µ –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ –∫–ª–∏–µ–Ω—Ç–∞/–∑–∞–ø–∏—Å—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
2. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 2 —Å–µ–∫—É–Ω–¥—ã (debounce)
3. –û—Ç–∫—Ä–æ–π—Ç–µ Google Drive ‚Üí –ø–∞–ø–∫–∞ **"ClientLedger Backups"**
4. –î–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è —Ñ–∞–π–ª `backup_001_YYYY-MM-DD_HH-mm.json`

---

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ "DEVELOPER_ERROR" (–∫–æ–¥ 10)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ SHA-1 —Ç–æ—á–Ω–æ —Å–æ–≤–ø–∞–¥–∞–µ—Ç (—Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–∑ `sha1-info.txt`)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ package name —Ç–æ—á–Ω–æ `com.clientledger.app`

### –û—à–∏–±–∫–∞ "SIGN_IN_FAILED"
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Google Drive API –≤–∫–ª—é—á–µ–Ω–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ OAuth consent screen –Ω–∞—Å—Ç—Ä–æ–µ–Ω

### –ö–Ω–æ–ø–∫–∞ "–í–æ–π—Ç–∏ –≤ Google Drive" –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Google Play Services —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

---

## –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

- **–ü–æ–ª—É—á–µ–Ω–∏–µ SHA-1**: 30 —Å–µ–∫—É–Ω–¥ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Cloud Console**: 5-10 –º–∏–Ω—É—Ç (–≤—Ä—É—á–Ω—É—é)

**–ò—Ç–æ–≥–æ: ~10 –º–∏–Ω—É—Ç –∏ –≤—Å—ë –≥–æ—Ç–æ–≤–æ!** üöÄ
