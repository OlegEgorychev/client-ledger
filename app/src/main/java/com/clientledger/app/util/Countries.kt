package com.clientledger.app.util

/**
 * Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº ÑÑ‚Ñ€Ğ°Ğ½ Ñ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ½Ñ‹Ğ¼Ğ¸ ĞºĞ¾Ğ´Ğ°Ğ¼Ğ¸
 * Ğ¡Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ°: Ğ Ğ¾ÑÑĞ¸Ñ Ğ¿ĞµÑ€Ğ²Ğ°Ñ (Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ), Ğ¾ÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ğ¾ Ğ°Ğ»Ñ„Ğ°Ğ²Ğ¸Ñ‚Ñƒ
 */
object Countries {
    val defaultCountry = Country(
        name = "Ğ Ğ¾ÑÑĞ¸Ñ",
        code = "+7",
        flag = "ğŸ‡·ğŸ‡º",
        minLength = 10,
        maxLength = 10
    )

    val allCountries = listOf(
        defaultCountry,
        Country("ĞĞ²ÑÑ‚Ñ€Ğ°Ğ»Ğ¸Ñ", "+61", "ğŸ‡¦ğŸ‡º", 9, 9),
        Country("ĞĞ²ÑÑ‚Ñ€Ğ¸Ñ", "+43", "ğŸ‡¦ğŸ‡¹", 10, 13),
        Country("ĞĞ·ĞµÑ€Ğ±Ğ°Ğ¹Ğ´Ğ¶Ğ°Ğ½", "+994", "ğŸ‡¦ğŸ‡¿", 9, 9),
        Country("ĞÑ€Ğ¼ĞµĞ½Ğ¸Ñ", "+374", "ğŸ‡¦ğŸ‡²", 8, 8),
        Country("Ğ‘ĞµĞ»Ğ°Ñ€ÑƒÑÑŒ", "+375", "ğŸ‡§ğŸ‡¾", 9, 9),
        Country("Ğ‘ĞµĞ»ÑŒĞ³Ğ¸Ñ", "+32", "ğŸ‡§ğŸ‡ª", 9, 9),
        Country("Ğ‘Ñ€Ğ°Ğ·Ğ¸Ğ»Ğ¸Ñ", "+55", "ğŸ‡§ğŸ‡·", 10, 11),
        Country("Ğ’ĞµĞ»Ğ¸ĞºĞ¾Ğ±Ñ€Ğ¸Ñ‚Ğ°Ğ½Ğ¸Ñ", "+44", "ğŸ‡¬ğŸ‡§", 10, 10),
        Country("Ğ’ĞµĞ½Ğ³Ñ€Ğ¸Ñ", "+36", "ğŸ‡­ğŸ‡º", 9, 9),
        Country("Ğ“ĞµÑ€Ğ¼Ğ°Ğ½Ğ¸Ñ", "+49", "ğŸ‡©ğŸ‡ª", 10, 11),
        Country("Ğ“Ñ€ĞµÑ†Ğ¸Ñ", "+30", "ğŸ‡¬ğŸ‡·", 10, 10),
        Country("Ğ“Ñ€ÑƒĞ·Ğ¸Ñ", "+995", "ğŸ‡¬ğŸ‡ª", 9, 9),
        Country("Ğ”Ğ°Ğ½Ğ¸Ñ", "+45", "ğŸ‡©ğŸ‡°", 8, 8),
        Country("Ğ•Ğ³Ğ¸Ğ¿ĞµÑ‚", "+20", "ğŸ‡ªğŸ‡¬", 10, 10),
        Country("Ğ˜Ğ·Ñ€Ğ°Ğ¸Ğ»ÑŒ", "+972", "ğŸ‡®ğŸ‡±", 9, 9),
        Country("Ğ˜Ğ½Ğ´Ğ¸Ñ", "+91", "ğŸ‡®ğŸ‡³", 10, 10),
        Country("Ğ˜Ğ½Ğ´Ğ¾Ğ½ĞµĞ·Ğ¸Ñ", "+62", "ğŸ‡®ğŸ‡©", 9, 11),
        Country("Ğ˜Ñ€Ğ»Ğ°Ğ½Ğ´Ğ¸Ñ", "+353", "ğŸ‡®ğŸ‡ª", 9, 9),
        Country("Ğ˜ÑĞ¿Ğ°Ğ½Ğ¸Ñ", "+34", "ğŸ‡ªğŸ‡¸", 9, 9),
        Country("Ğ˜Ñ‚Ğ°Ğ»Ğ¸Ñ", "+39", "ğŸ‡®ğŸ‡¹", 9, 10),
        Country("ĞšĞ°Ğ·Ğ°Ñ…ÑÑ‚Ğ°Ğ½", "+7", "ğŸ‡°ğŸ‡¿", 10, 10),
        Country("ĞšĞ°Ğ½Ğ°Ğ´Ğ°", "+1", "ğŸ‡¨ğŸ‡¦", 10, 10),
        Country("ĞšĞ¸Ñ‚Ğ°Ğ¹", "+86", "ğŸ‡¨ğŸ‡³", 11, 11),
        Country("ĞšÑ‹Ñ€Ğ³Ñ‹Ğ·ÑÑ‚Ğ°Ğ½", "+996", "ğŸ‡°ğŸ‡¬", 9, 9),
        Country("Ğ›Ğ°Ñ‚Ğ²Ğ¸Ñ", "+371", "ğŸ‡±ğŸ‡»", 8, 8),
        Country("Ğ›Ğ¸Ñ‚Ğ²Ğ°", "+370", "ğŸ‡±ğŸ‡¹", 8, 8),
        Country("ĞœĞ¾Ğ»Ğ´Ğ¾Ğ²Ğ°", "+373", "ğŸ‡²ğŸ‡©", 8, 8),
        Country("ĞĞ¸Ğ´ĞµÑ€Ğ»Ğ°Ğ½Ğ´Ñ‹", "+31", "ğŸ‡³ğŸ‡±", 9, 9),
        Country("ĞĞ¾Ñ€Ğ²ĞµĞ³Ğ¸Ñ", "+47", "ğŸ‡³ğŸ‡´", 8, 8),
        Country("ĞŸĞ¾Ğ»ÑŒÑˆĞ°", "+48", "ğŸ‡µğŸ‡±", 9, 9),
        Country("ĞŸĞ¾Ñ€Ñ‚ÑƒĞ³Ğ°Ğ»Ğ¸Ñ", "+351", "ğŸ‡µğŸ‡¹", 9, 9),
        Country("Ğ ÑƒĞ¼Ñ‹Ğ½Ğ¸Ñ", "+40", "ğŸ‡·ğŸ‡´", 9, 9),
        Country("Ğ¡Ğ¨Ğ", "+1", "ğŸ‡ºğŸ‡¸", 10, 10),
        Country("Ğ¢Ğ°Ğ´Ğ¶Ğ¸ĞºĞ¸ÑÑ‚Ğ°Ğ½", "+992", "ğŸ‡¹ğŸ‡¯", 9, 9),
        Country("Ğ¢ÑƒÑ€ĞºĞ¼ĞµĞ½Ğ¸ÑÑ‚Ğ°Ğ½", "+993", "ğŸ‡¹ğŸ‡²", 8, 8),
        Country("Ğ¢ÑƒÑ€Ñ†Ğ¸Ñ", "+90", "ğŸ‡¹ğŸ‡·", 10, 10),
        Country("Ğ£Ğ·Ğ±ĞµĞºĞ¸ÑÑ‚Ğ°Ğ½", "+998", "ğŸ‡ºğŸ‡¿", 9, 9),
        Country("Ğ£ĞºÑ€Ğ°Ğ¸Ğ½Ğ°", "+380", "ğŸ‡ºğŸ‡¦", 9, 9),
        Country("Ğ¤Ğ¸Ğ½Ğ»ÑĞ½Ğ´Ğ¸Ñ", "+358", "ğŸ‡«ğŸ‡®", 9, 10),
        Country("Ğ¤Ñ€Ğ°Ğ½Ñ†Ğ¸Ñ", "+33", "ğŸ‡«ğŸ‡·", 9, 9),
        Country("Ğ§ĞµÑ…Ğ¸Ñ", "+420", "ğŸ‡¨ğŸ‡¿", 9, 9),
        Country("Ğ¨Ğ²ĞµĞ¹Ñ†Ğ°Ñ€Ğ¸Ñ", "+41", "ğŸ‡¨ğŸ‡­", 9, 9),
        Country("Ğ¨Ğ²ĞµÑ†Ğ¸Ñ", "+46", "ğŸ‡¸ğŸ‡ª", 9, 10),
        Country("Ğ­ÑÑ‚Ğ¾Ğ½Ğ¸Ñ", "+372", "ğŸ‡ªğŸ‡ª", 7, 8),
        Country("Ğ¯Ğ¿Ğ¾Ğ½Ğ¸Ñ", "+81", "ğŸ‡¯ğŸ‡µ", 10, 10),
        Country("Ğ®Ğ¶Ğ½Ğ°Ñ ĞšĞ¾Ñ€ĞµÑ", "+82", "ğŸ‡°ğŸ‡·", 9, 10),
    )

    /**
     * ĞĞ°Ğ¹Ñ‚Ğ¸ ÑÑ‚Ñ€Ğ°Ğ½Ñƒ Ğ¿Ğ¾ ĞºĞ¾Ğ´Ñƒ
     */
    fun findByCode(code: String): Country? {
        return allCountries.firstOrNull { it.code == code }
    }

    /**
     * ĞĞ°Ğ¹Ñ‚Ğ¸ ÑÑ‚Ñ€Ğ°Ğ½Ñƒ Ğ¿Ğ¾ Ğ½Ğ¾Ğ¼ĞµÑ€Ñƒ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ° Ğ² Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğµ E.164
     */
    fun findCountryByPhoneNumber(phoneNumber: String): Country? {
        if (!phoneNumber.startsWith("+")) return null
        
        // ĞŸÑ€Ğ¾Ğ±ÑƒĞµĞ¼ Ğ½Ğ°Ğ¹Ñ‚Ğ¸ Ğ¿Ğ¾ ĞºĞ¾Ğ´Ñƒ (Ğ¾Ñ‚ Ğ´Ğ»Ğ¸Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğº ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¾Ğ¼Ñƒ)
        val sortedByCodeLength = allCountries.sortedByDescending { it.code.length }
        for (country in sortedByCodeLength) {
            if (phoneNumber.startsWith(country.code)) {
                return country
            }
        }
        return null
    }

    /**
     * Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ÑŒ Ğ½Ğ¾Ğ¼ĞµÑ€ Ğ±ĞµĞ· ĞºĞ¾Ğ´Ğ° ÑÑ‚Ñ€Ğ°Ğ½Ñ‹ Ğ¸Ğ· E.164 Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ°
     */
    fun extractNumberWithoutCode(phoneNumber: String, country: Country): String {
        if (!phoneNumber.startsWith(country.code)) return phoneNumber
        return phoneNumber.substring(country.code.length)
    }
}

