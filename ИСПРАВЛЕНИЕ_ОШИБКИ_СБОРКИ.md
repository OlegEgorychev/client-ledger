# Исправление ошибки сборки: play-services-drive не найден

## Проблема

```
Could not find com.google.android.gms:play-services-drive:18.0.0
```

## Решение: Удалена неиспользуемая зависимость ✅

**Проблема была в том, что `play-services-drive` вообще не используется в коде!**

Код использует только:
- `play-services-auth` - для авторизации через Google Sign-In
- `google-api-services-drive` (REST API клиент) - для работы с Drive API

Я убрал `play-services-drive` из зависимостей. Теперь в `app/build.gradle.kts`:

```kotlin
// Google Play Services for authentication
implementation("com.google.android.gms:play-services-auth:21.0.0")

// Google Drive REST API (не требует play-services-drive)
implementation("com.google.api-client:google-api-client-android:2.2.0")
implementation("com.google.apis:google-api-services-drive:v3-rev20220815-2.0.0")
```

**Попробуйте собрать снова:**
1. В Android Studio: **File → Sync Project with Gradle Files**
2. Подождите синхронизации (может занять 1-2 минуты)
3. Попробуйте собрать: **Build → Build Bundle(s) / APK(s) → Build APK(s)**

---

## Решение 2: Если ошибка остается - использовать только Google Play Services

Если версия `18.0.0` тоже не найдена, можно упростить и использовать только:

```kotlin
// Google Play Services для авторизации и Drive
implementation("com.google.android.gms:play-services-auth:21.0.0")
implementation("com.google.android.gms:play-services-drive:17.0.0")
```

И обновить `GoogleDriveBackupService.kt` для использования только Google Play Services API (без REST API клиента).

---

## Решение 3: Очистить кеш Gradle

Если зависимости все равно не находятся:

1. **В Android Studio:**
   - **File → Invalidate Caches / Restart...**
   - Выберите **"Invalidate and Restart"**

2. **Или вручную через терминал:**
   ```cmd
   cd D:\Programs\test
   gradlew clean
   gradlew build --refresh-dependencies
   ```

3. **Удалите папку .gradle (если нужно):**
   - Закройте Android Studio
   - Удалите папку `D:\Programs\test\.gradle`
   - Откройте Android Studio снова
   - File → Sync Project with Gradle Files

---

## Решение 4: Проверить репозитории

Убедитесь, что в `settings.gradle.kts` есть:

```kotlin
dependencyResolutionManagement {
    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)
    repositories {
        google()  // ← Должно быть!
        mavenCentral()
    }
}
```

---

## Решение 5: Использовать только авторизацию (без Drive API)

Если проблемы с Drive API продолжаются, можно временно отключить автоматическую загрузку в Drive и использовать только локальные бэкапы. Пользователь сможет вручную экспортировать бэкап.

---

## Рекомендация

**Сначала попробуйте Решение 1** (версии уже обновлены).

Если не работает, попробуйте **Решение 3** (очистка кеша).

---

## Проверка

После исправления попробуйте собрать:
- **Build → Build Bundle(s) / APK(s) → Build APK(s)**

Если сборка прошла успешно, можно продолжать настройку!
